<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ConDHor - Software de confección de horarios</title>
  <link rel="stylesheet" href="../css/styles_general.css">
  <link rel="stylesheet" href="../css/styles_basedatos.css">
</head>
<body>

  <!-- Barra superior -->
  <div id="barra-superior"></div>

  <!-- Layout: sidebar + contenido -->
  <div id="layout">

    <div id="contenido">

      <!-- 1) Toolbar -->
      <div class="toolbar">
        <div class="search-wrapper">
          <input
            type="text"
            id="searchMateria"
            placeholder="Buscar materia..."
            autocomplete="off"
          />
          <button type="button" id="clearSearch" class="clear-btn" aria-label="Borrar búsqueda">
            ×
          </button>
        </div>
        <div class="actions">
          <a href="#" id="btnAgregar"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor" style="vertical-align: middle"><path d="M730-530H630q-12.75 0-21.37-8.68-8.63-8.67-8.63-21.5 0-12.82 8.63-21.32 8.62-8.5 21.37-8.5h100v-100q0-12.75 8.68-21.38 8.67-8.62 21.5-8.62 12.82 0 21.32 8.62 8.5 8.63 8.5 21.38v100h100q12.75 0 21.38 8.68 8.62 8.67 8.62 21.5 0 12.82-8.62 21.32-8.63 8.5-21.38 8.5H790v100q0 12.75-8.68 21.37-8.67 8.63-21.5 8.63-12.82 0-21.32-8.63-8.5-8.62-8.5-21.37v-100Zm-370 49q-66 0-108-42t-42-108q0-66 42-108t108-42q66 0 108 42t42 108q0 66-42 108t-108 42ZM40-220v-34q0-35 17.5-63.5T108-360q75-33 133.34-46.5t118.5-13.5Q420-420 478-406.5T611-360q33 15 51 43t18 63v34q0 24.75-17.62 42.37Q644.75-160 620-160H100q-24.75 0-42.37-17.63Q40-195.25 40-220Z"/></svg> Añadir</a>
          <a href="#" id="btnImportar"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor" style="vertical-align: middle"><path d="M180-120q-24 0-42-18t-18-42v-152q0-13 8.5-21.5T150-362q13 0 21.5 8.5T180-332v152h600v-543H180v151q0 13-8.5 21.5T150-542q-13 0-21.5-8.5T120-572v-208q0-24 18-42t42-18h600q24 0 42 18t18 42v600q0 24-18 42t-42 18H180Zm331-302H150q-13 0-21.5-8.5T120-452q0-13 8.5-21.5T150-482h361l-72-73q-8-9-8.5-21t8.5-21q9-9 21-9t21 9l124 124q9 9 9 21.5t-9 21.5L481-306q-9 9-21 8.5t-21-9.5q-9-9-8.5-20.5T439-348l72-74Z"/></svg> Importar</a>
        </div>
      </div>

      <!-- 2) Conteo -->
      <div class="count-text">
        Mostrando <span id="mostrados">0</span> de <span id="total">0</span> materias
      </div>

      <!-- 3) Tabla de materias -->
      <div class="data-table-container">
        <table class="data-table">
          <colgroup>
            <col style="width:60px"><!-- ID -->
            <col style="width:150px"><!-- Referencia -->
            <col style="width:500px"><!-- Nombre -->
            <col style="width:150px"><!-- Tramos -->
            <col><!-- Unidades -->
            <col style="width:120px"><!-- Acciones -->
          </colgroup>
          <thead>
            <tr>
              <th><button class="thead-button" data-col="id">ID <span class="arrow"></span></button></th>
              <th><button class="thead-button" data-col="referencia">Referencia <span class="arrow"></span></button></th>
              <th style="text-align:left"><button class="thead-button" data-col="nombre">Nombre <span class="arrow"></span></button></th>
              <th><button class="thead-button" data-col="tramos_por_semana">Tramos/Sem. <span class="arrow"></span></button></th>
              <th style="text-align:left">Unidades</th>
              <th></th>
            </tr>
          </thead>
          <tbody>

          </tbody>
        </table>
      </div>

    </div>
  </div>

  <!-- Overlay Añadir materia -->
  <div id="add-overlay" class="modal-overlay"></div>

  <!-- Modal diálogo Añadir materia -->
  <div id="add-modal" class="modal-dialog">
    <div class="modal-header">
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" height="24px"
             viewBox="0 -960 960 960" width="24px" fill="currentColor"
             style="vertical-align: middle">
          <path d="M730-530H630q-12.75 0-21.37-8.68-8.63-8.67-8.63-21.5
                   0-12.82 8.63-21.32 8.62-8.5 21.37-8.5h100v-100q0-12.75
                   8.68-21.38 8.67-8.62 21.5-8.62 12.82 0 21.32 8.62
                   8.5 8.63 8.5 21.38v100h100q12.75 0 21.38 8.68
                   8.62 8.67 8.62 21.5 0 12.82-8.62 21.32-8.63 8.5
                   -21.38 8.5H790v100q0 12.75-8.68 21.37-8.67 8.63
                   -21.5 8.63-12.82 0-21.32-8.63-8.5-8.62-8.5-21.37v-100Z"/>
        </svg>
        <span style="font-size:1.25rem;font-weight:bold;margin-left:.25rem">
          Añadir materia
        </span>
      </div>
      <button id="closeAddModal" class="close-btn">&times;</button>
    </div>

    <form id="addMateriaForm" class="modal-form" style="height: 440px">
      <div class="form-group">
        <label for="addMatId">ID</label>
        <input type="text" id="addMatId" disabled
               style="border:none;background:none;padding:0;">
      </div>

      <div class="form-group" style="margin-right:210px">
        <label for="addMatRef">Referencia <span style="color:red">*</span></label>
        <input type="text" id="addMatRef" required style="width:150px">
      </div>

      <div class="form-group">
        <label for="addMatName">Nombre <span style="color:red">*</span></label>
        <input type="text" id="addMatName" required>
      </div>

      <div class="form-group" style="margin-right:300px">
        <label for="addMatTramos">Tramos por semana <span style="color:red">*</span></label>
        <input type="number" id="addMatTramos" min="0" required style="width:60px">
      </div>

      <div class="form-group" style="margin-left:-120px">
        <label for="addMatUnidades">Unidades <span style="color:red">*</span></label>
        <!-- envolvemos en un flex-column -->
        <div>
          <select
            id="addMatUnidades"
            multiple
            size="8"
            required
            style="font-size: 0.9rem; width:360px"
          >
            <!-- Options ... -->
          </select>
          <div id="addMatUnidadesCount" style="margin: 10px 0 0 20px; font-size: 0.8rem; font-style: italic">
            0 unidades seleccionadas
          </div>
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" id="cancelAdd">Cancelar</button>
        <button type="submit" id="submitAdd">Añadir</button>
        <button type="submit" id="submitAddContinue">Añadir y seguir</button>
      </div>
    </form>
  </div>


<!-- Overlay Editar materia -->
<div id="edit-overlay" class="modal-overlay"></div>
<!-- Modal diálogo Editar materia -->
<div id="edit-modal" class="modal-dialog">
  <div class="modal-header">
    <div>
      <!-- icono de editar -->
      <span style="font-size:1.25rem;font-weight:bold;margin-left:.25rem">
        Editar materia
      </span>
    </div>
    <button id="closeEditModal" class="close-btn">&times;</button>
  </div>
  <form id="editMateriaForm" class="modal-form">
    <div class="form-group">
      <label for="editMatId">ID</label>
      <input type="text" id="editMatId" disabled style="border:none;background:none;padding:0;">
    </div>
    <div class="form-group" style="margin-right:210px">
      <label for="editMatRef">Referencia <span style="color:red">*</span></label>
      <input type="text" id="editMatRef" required style="width:150px">
    </div>
    <div class="form-group">
      <label for="editMatName">Nombre <span style="color:red">*</span></label>
      <input type="text" id="editMatName" required>
    </div>
    <div class="form-group" style="margin-right:300px">
      <label for="editMatTramos">Tramos por semana <span style="color:red">*</span></label>
      <input type="number" id="editMatTramos" min="0" required style="width:60px">
    </div>

    <div class="form-group" style="margin-left:-120px">
      <label for="editMatUnidades">Unidades <span style="color:red">*</span></label>
      <!-- envolvemos en un flex-column -->
      <div>
        <select
          id="editMatUnidades"
          multiple
          size="8"
          required
          style="font-size: 0.9rem; width:360px"
        >
          <!-- Options ... -->
        </select>
        <div id="editMatUnidadesCount" style="margin: 10px 0 0 20px; font-size: 0.8rem; font-style: italic">
          0 unidades seleccionadas
        </div>
      </div>
    </div>

    <div class="modal-actions">
      <button type="button" id="cancelEdit">Cancelar</button>
      <button type="submit" id="submitEdit">Guardar cambios</button>
    </div>
  </form>
</div>


<!-- Overlay Borrar materia -->
<div id="delete-overlay" class="modal-overlay"></div>

<!-- Modal diálogo Borrar materia -->
<div id="delete-modal" class="modal-dialog">
  <div class="modal-header">
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" height="24px"
           viewBox="0 -960 960 960" width="24px" fill="currentColor"
           style="vertical-align: middle">
        <path d="m696-440-56-56 83-84-83-83 56-57 84 84 83-84
                 57 57-84 83 84 84-57 56-83-83-84 83Zm-336-40q-66
                 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47
                 113q0 66-47 113t-113 47ZM40-160v-112q0-34
                 17.5-62.5T104-378q62-31 126-46.5T360-440q66
                 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Z"/>
      </svg>
      <span style="font-size:1.25rem;font-weight:bold;margin-left:.25rem">
        Eliminar materia
      </span>
    </div>
    <button id="closeDeleteModal" class="close-btn">&times;</button>
  </div>
  <div class="modal-form" style="padding:1rem; height:180px">
    <p>¿Estás seguro de que deseas eliminar esta materia?</p>
    <div class="delete-info"
         style="margin:1rem; display:flex; align-items:center; gap:1rem;
                background-color:#f0f0f0; padding:0.5rem; border-left:solid 5px #999">
      <span id="delMatId" style="color:#666; font-weight:500"></span>
      <span id="delMatRefName" style="color:#333; font-weight:500"></span>
    </div>
    <div class="modal-actions" style="justify-content:flex-end">
      <button type="button" id="cancelDelete">Cancelar</button>
      <button type="button" id="confirmDelete">Eliminar</button>
    </div>
  </div>
</div>










  <script src="../javascript/basedatos_general.js" defer></script>
  <script src="../javascript/basedatos_materias.js" defer></script>
</body>
</html>
